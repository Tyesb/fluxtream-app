<!DOCTYPE html>
<html>
<head>
  <title>Swagger UI</title>
  <link href='css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='/static/css/bootstrap-3.2.0.min.css' media='screen' rel='stylesheet' type='text/css'/>
  <script type="text/javascript" src="lib/shred.bundle.js"></script>
  <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
  <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
  <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
  <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
  <script src='lib/handlebars-1.0.0.js' type='text/javascript'></script>
  <script src='lib/underscore-min.js' type='text/javascript'></script>
  <script src='lib/backbone-min.js' type='text/javascript'></script>
  <script src='lib/swagger.js' type='text/javascript'></script>
  <script src='swagger-ui.js' type='text/javascript'></script>
  <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>

  <!-- enabling this will enable oauth2 implicit scope support -->
  <!--<script src='lib/swagger-oauth.js' type='text/javascript'></script>-->

  <script type="text/javascript">
    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }
    var apiDocsURL = getParameterByName("apiDocsURL");
    var onCompleteCount = 0;
    $(function () {
      log("this is called once");
      window.swaggerUi = new SwaggerUi({
      url: apiDocsURL,
      dom_id: "swagger-ui-container",
      supportedSubmitMethods: ['get', 'post', 'put', 'delete'],
      onComplete: function(swaggerApi, swaggerUi){
        onCompleteCount++;
        // strangely, this callback method is always invoked 3 times...
        if (onCompleteCount==3) {
            injectGeneratedDocs();
        }
      },
      onFailure: function(data) {
        log("Unable to Load SwaggerUI");
      },
      docExpansion: "list"
    });

    function injectGeneratedDocs() {

        var sortedApis = ["guest", "calendar", "bodytrack", "sync", "comments", "metadata", "settings", "notifications"];

        for (var i=0; i<sortedApis.length; i++) {
            var li = $("#resource_" + sortedApis[i]);
            var narrative = $("#" + sortedApis[i] + "_narrative");
            $("#resources-rearranged").append(li);
            $("#resource_" + sortedApis[i]).prepend(narrative);
        }

        $("#resources").attr("id", "resources-hidden");
        $("#resources-rearranged").attr("id", "resources");
        $(".endpoints").css("height", "");
    }

    window.swaggerUi.load();
  });
  </script>
</head>

<body class="swagger-section">

    <div class="container-fluid">
        <div class="swagger-ui-wrap row">

            <h1>Fluxtream's (REST) API Documentation</h1>

            <h2>Foreword</h2>

            <div class="alert alert-warning" role="alert">
                <strong>Warning</strong> This API is in beta.
            </div>

            <p>This API is, in its current state, exactly what we are using for our web frontend and mobile apps, no more, no less.
                That means it hasn't been thought out to be generic enough to support any possible application under the sun. It is
                subject to change as we discover new use-cases that we want support or things that we want to improve.
            </p>
            <p>At this point then, <strong>we don't guarantee any sort of backward compatibility</strong>.</p>
            <p>That said, if you have specific requests, please don't hesitate to <a href="mailto:info@fluxtream.org">contact us</a>. As always, we are looking forward to your feedback.</p>

            <p>From a technical standpoint, Fluxtream exposes relatively few CRUD-type operations and I/O payloads are generally quite complex. Hence, the API is organized
                by "theme" rather than by the rigid concept of a "resource" in REST parlance. </p>

            <h2>Glossary</h2>

            <dl class="dl">
                <dt>Guest</dt>
                <dd>We prefer to call our users "guests", to remind us that we are but temporarily hosting people's data,
                    which is wholly and thoroughly theirs.</dd>
                <dt>Buddy-to-access</dt>
                <dd>Many endpoints can specify an optional <code>buddyToAccess</code> parameter. Fluxtream guests can indeed
                share their data with buddies; we use this rather informal word to stress our preference for horizontal
                relationships when sharing data.</dd>
            </dl>

            <div id="resources_container">
                <ul id="resources-rearranged">
                </ul>
            </div>
        </div>

        <div id="swagger-ui-container" style="display:none" class="swagger-ui-wrap">
        </div>

        <div style="display:none">
            <div id="guest_narrative">
                <h2>Knowing your guests</h2>
                <p>This is a very straightforward API that retrieves some basic information
                about the currently logged-in guest. </p>
            </div>
            <div id="calendar_narrative">
                <h2>Retrieve API data per day, per week and per month</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="bodytrack_narrative">
                <h2>Manage data for the BodyTrack Timeline</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="sync_narrative">
                <h2>Manage API data synchronization</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="comments_narrative">
                <h2>User comments</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="metadata_narrative">
                <h2>Edit and retrieve user timezone info</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="settings_narrative">
                <h2>Manage user settings</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="notifications_narrative">
                <h2>User notifications</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
        </div>
    </div>

</body>
</html>
